
machine:
  node:
    version: 6.0.0

general:
  artifacts:
    - "test"

#details on running sauselabs tests with circle ci can be found here https://circleci.com/docs/browser-testing-with-sauce-labs/
test:

  # pre:
  #   - elm-package install --yes

  override:
    # - elm-package install --yes
    - /home/ubuntu/sysconfcpus/bin/sysconfcpus -n 2 npm test

  # post:
  #   - killall --wait sc
  #   - pip install --user codecov
  #   - codecov --file coverage/lcov.info --disable search --token=f054ae63-f930-4ad8-ba09-e2b2be42b2d6

dependencies:
  pre:
    - npm i -g elm
    - npm i elm-test --dev
    - npm i elm-test
    - elm-package install -y
    - git clone https://github.com/obmarg/libsysconfcpus.git;
    - cd libsysconfcpus
    - ./configure --prefix=/home/ubuntu/sysconfcpus;
    - make install
    - cd ..
    - /home/ubuntu/sysconfcpus/bin/sysconfcpus -n 2 make elm

  # override:
  #   - npm i -g elm
  #   - npm i elm-test --dev
  #   - npm i elm-test
  #   - elm-package install -y

  # post:
  #   - npm test
